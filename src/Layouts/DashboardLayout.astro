---
import "../styles/global.css";
import Toast from "@/components/common/Toast.astro";
import ConfirmationModal from "@/components/common/ConfirmationModal.astro";

interface Props {
  title?: string;
  active?: string;
}

const navItems = [
  { href: "/dashboard", label: "Статьи", id: "articles" },
  { href: "/dashboard/article/create", label: "Создать статью", id: "create-article" },
  { href: "/dashboard/event/create", label: "Создать событие", id: "create-event" },
];

const { title = "MAAG Dashboard", active = "articles" } = Astro.props as Props;
---

<!doctype html>
<html lang="ru" data-theme="maag">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>{title}</title>
  </head>
  <body class="bg-base-200 min-h-screen">
    <div class="flex min-h-screen">
      <aside class="w-64 bg-base-100 border-r border-base-300 hidden lg:flex flex-col">
        <div class="px-6 py-6 border-b border-base-300">
          <a href="/" class="block text-xl font-serif">MAAG</a>
          <p class="mt-1 text-xs text-base-content/60 uppercase tracking-[0.3em]">
            Dashboard
          </p>
        </div>
        <nav class="flex-1 px-4 py-6 space-y-2">
          {
            navItems.map((item) => (
              <a
                href={item.href}
                class:list={[
                  "block px-4 py-2 rounded-md text-sm font-medium transition-colors",
                  active === item.id
                    ? "bg-primary text-primary-content"
                    : "text-base-content/80 hover:bg-base-200"
                ]}
              >
                {item.label}
              </a>
            ))
          }
        </nav>
      </aside>
      <div class="flex-1 flex flex-col" x-data>
        <header class="w-full bg-base-100 border-b border-base-300 px-4 sm:px-6 py-4 flex items-center justify-between">
          <h1 class="text-lg sm:text-xl font-semibold text-base-content">
            {title}
          </h1>
          <a href="/" class="text-sm text-primary hover:underline">На сайт</a>
        </header>
        <main class="flex-1 px-4 sm:px-6 py-6">
          <slot />
        </main>
      </div>
    </div>

    <Toast />
    <ConfirmationModal />
  </body>
</html>
