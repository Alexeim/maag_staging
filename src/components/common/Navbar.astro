---
import logo from "../../assets/logo/logo.svg";
import { Search, Instagram, Youtube, X } from "@lucide/astro";
import { Image } from "astro:assets";
import searchIcon from "../../assets/icons/search-mobile.svg";
import burgerIcon from "../../assets/icons/burger-mobile.svg";
import Button from "./Button.astro";

interface NavbarProps {
  variant: "default" | "transparent";
  languages: string;
  user?: boolean;
  showLogoInNav?: boolean;
}

const {
  variant,
  languages,
  user = true,
  showLogoInNav = true,
} = Astro.props as NavbarProps;

const navbarClasses = variant === "default" ? "bg-base-100" : "bg-transparent";
const positionClasses = variant === "default" ? "relative" : "absolute";
const colorClasses = "text-base-content";
const borderClasses = "border-none";

const logoSrc = logo.src;
---

<header class:list={["w-full h-[80px] lg:h-[90px]", positionClasses]}>
  <!-- Background Layer -->
  <div class:list={["absolute inset-0 w-full h-full z-20", navbarClasses]}>
  </div>

  <!-- Content Layer -->
  <nav
    class:list={[
      "relative w-full h-full px-4 lg:px-[57px] flex items-center justify-between z-40",
      colorClasses,
      borderClasses,
    ]}
  >
    <!-- Left Side Group (Logo + Menu) -->
    <div class="flex items-center relative">
      {
        showLogoInNav && (
          <a class="cursor-pointer" href="/">
            <Image src={logo} alt="Maag logo" class="w-12 lg:w-16" />
          </a>
        )
      }
      <!-- Desktop Menu -->
      <div
        class="hidden lg:flex absolute top-1/2 left-full -translate-y-1/2 ml-12"
      >
        <ul class="flex items-center text-base-content whitespace-nowrap">
          <li
            class="nav-item font-old-standard uppercase tracking-[.46em] text-base font-normal hover:border-b hover:border-base-content pb-0.5"
          >
            <a href="/culture" class="">Культура</a>
          </li>
          <div class="w-[1px] h-[12px] bg-neutral-300 mx-6"></div>
          <li
            class="nav-item font-old-standard uppercase tracking-[.46em] text-base font-normal hover:border-b hover:border-base-content pb-0.5"
          >
            <a href="/building" class="">Париж</a>
          </li>
          <div class="w-[1px] h-[12px] bg-neutral-300 mx-6"></div>
          <li
            class="nav-item font-old-standard uppercase tracking-[.46em] text-base font-normal hover:border-b hover:border-base-content pb-0.5"
          >
            <a href="/building" class="">Дети</a>
          </li>
          <div class="w-[1px] h-[12px] bg-neutral-300 mx-6"></div>
          <li
            class="nav-item font-old-standard uppercase tracking-[.46em] text-base font-normal hover:border-b hover:border-base-content pb-0.5"
          >
            <a href="/calendar" class="">Календарь</a>
          </li>
          <div class="w-[1px] h-[12px] bg-neutral-300 mx-6"></div>
          <li
            class="nav-item font-old-standard uppercase tracking-[.46em] text-base font-normal hover:border-b hover:border-base-content pb-0.5"
          >
            <a href="/building" class="">О проекте</a>
          </li>
        </ul>
      </div>
    </div>

    <!-- Right Side -->
    <div class="hidden lg:flex items-center gap-[19px]">
      <button class="p-2">
        <Image src={searchIcon} alt="Search" class="h-5 w-5" />
      </button>
      <button class="p-2">
        <Instagram class="h-6 w-6" />
      </button>
      <button class="p-2">
        <Youtube class="h-7 w-7" />
      </button>
      <Button variant="primary" href="#" class="sm">Войти</Button>
    </div>

    <!-- Mobile Icons -->
    <div class="flex items-center gap-4 lg:hidden">
      <button class="p-2">
        <Image src={searchIcon} alt="Search" class="h-5 w-5" />
      </button>
      <button @click="$store.navbar.toggle()" class="p-2 z-50">
        <span x-show="!$store.navbar.isOpen">
          <Image src={burgerIcon} alt="Open menu" class="h-4 w-5" />
        </span>
        <span x-show="$store.navbar.isOpen">
          <X class="h-6 w-6" />
        </span>
      </button>
    </div>
  </nav>
</header>

<style>
  .nav-item {
    transition: none !important;
  }
  .nav-item:hover {
    transition: none !important;
  }
</style>
