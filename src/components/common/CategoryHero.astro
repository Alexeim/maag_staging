---
import { Image } from "astro:assets";
import fallbackImage from "../../assets/images/culture.jpg";

interface CategoryHeroProps {
  title?: string;
  article?: {
    id: string;
    title: string;
    imageUrl?: string;
    tags?: string[];
    category?: string;
    href?: string;
  } | null;
}

const { title = "Category", article = null } = Astro.props as CategoryHeroProps;

const articleTag = article?.tags?.[0] || article?.category || title;
const articleTitle = article?.title || "Нет главной статьи";
const articleHref = article?.href || "#";
const articleImage = article?.imageUrl;
---

<section class="w-full min-h-[150px] px-4 lg:px-8">
  <h2 class="text-2xl lg:text-4xl leading-tight font-thin font-oswald text-wrap break-words mt-16 mb-8">{title}</h2>
  <div class="w-full bg-white flex flex-col gap-6 lg:flex-row lg:gap-8 items-start justify-start min-h-[100px] mb-16">
    <div class="w-full lg:w-3/5 h-auto lg:h-[400px] overflow-hidden bg-black">
      <a href={articleHref} class="block w-full h-full">
        {articleImage ? (
          <img
            src={articleImage}
            alt={articleTitle}
            class="w-full h-full object-contain object-center"
            loading="lazy"
          />
        ) : (
          <Image
            src={fallbackImage}
            alt={articleTitle}
            class="w-full h-full object-contain object-center"
          />
        )}
      </a>
    </div>
    <div class="w-full lg:w-2/5 pt-4 px-4 lg:px-0">
      <p class="text-error uppercase mb-3 font-inter text-sm tracking-[.46em]">{articleTag}</p>
      <a href={articleHref} class="block">
        <h4 class="text-2xl lg:text-3xl leading-tight font-thin font-oswald text-wrap break-words hover:underline">{articleTitle}</h4>
      </a>
    </div>
  </div>
</section>
