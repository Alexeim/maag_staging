---
import { Image } from "astro:assets";
import picture3 from "../../assets/images/article_content/par.jpeg";

interface NetlenkaCardProps {
  title?: string;
  category?: string;
  date?: string;
  transitionName?: string;
  imageUrl?: string;
  href?: string;
}

const {
  title = "Без названия",
  category = "Самое Читаемое",
  date = "",
  transitionName,
  imageUrl,
  href = "#",
} = Astro.props as NetlenkaCardProps;

const displayImage = imageUrl || picture3.src;
const formattedCategory = `<span class="text-accent">${category}</span>`;
const meta = [date, formattedCategory].filter(Boolean).join(" • ");
---

<div
  class="w-full flex flex-col gap-2 max-h-[300px] min-w-[220px] lg:min-w-0 max-w-[303px]"
>
  <div class="w-full h-40 overflow-hidden">
    <a
      href={href}
      class="block w-full h-full transition-opacity duration-200 hover:opacity-90"
    >
      {
        imageUrl ? (
          <img
            src={displayImage}
            alt={title}
            class="w-full h-full object-cover object-center"
            loading="lazy"
            transition:name={transitionName}
          />
        ) : (
          <Image
            src={picture3}
            alt="Hot content image"
            class="w-full h-full object-cover object-center"
            loading="eager"
            transition:name={transitionName}
          />
        )
      }
    </a>
  </div>
  {
    meta && (
      <p class="text-[11px] text-base-content/55 font-inter uppercase tracking-wide mt-1">
        <Fragment set:html={meta} />
      </p>
    )
  }
  <h3 class="text-base lg:text-lg leading-tight font-oswald mb-3">
    <a
      href={href}
      class="hover:underline transition-opacity duration-200 hover:opacity-90 truncate block w-full"
    >
      {title}
    </a>
  </h3>
</div>
