---
import locationIcon from "../../assets/images/calendar/location.svg?raw";
import timeIcon from "../../assets/images/calendar/time.svg?raw";
import calendarIcon from "../../assets/images/calendar/calendar.svg?raw";
---

<div class="space-y-24">
  <div x-show="isLazyLoading" class="text-center">Загрузка событий...</div>

  <div x-show="!isLazyLoading">
    <!-- Main Event List -->
    <div class="space-y-16">
      <h2
        class="text-2xl font-semibold"
        x-text="selectedDate ? selectedDate.toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', timeZone: 'UTC' }) : ''"
      >
      </h2>
      <div class="space-y-10 lg:pl-44">
        <template x-if="filteredEvents.length === 0">
          <p class="text-neutral">На эту дату событий не найдено.</p>
        </template>
        <template x-for="event in filteredEvents" :key="event.id">
          <!-- Inlined EventListItem -->
          <div class="flex flex-col lg:flex-row gap-6 lg:gap-10">
            <div class="w-full lg:w-[463px] flex-shrink-0">
              <img
                x-bind:src="event.image"
                alt="Event Image"
                class="w-full h-64 lg:h-full object-cover"
              />
            </div>
            <div class="flex flex-col gap-5">
              <div>
                <span
                  class="text-sm uppercase tracking-widest font-medium text-error font-inter"
                  x-text="event.tag"></span>
                <h3
                  class="font-serif text-2xl mt-2 leading-tight"
                  x-text="event.title"
                >
                </h3>
                <p
                  class="font-serif text-lg mt-4 text-base-content"
                  x-text="event.description"
                >
                </p>
              </div>
              <div class="text-lg font-semibold">
                <div
                  class="flex items-center gap-4 py-2 border-b border-gray-300 font-inter"
                >
                  <span set:html={locationIcon} />
                  <span class="text-neutral text-sm" x-text="event.location"
                  ></span>
                </div>
                <div
                  class="flex items-center gap-4 py-2 border-b border-gray-300 font-inter"
                >
                  <span set:html={timeIcon} />
                  <span class="text-neutral text-sm" x-text="event.time"></span>
                </div>
                <div
                  class="flex items-center gap-4 py-2 border-b border-gray-300 font-inter"
                >
                  <span set:html={calendarIcon} />
                  <span class="text-neutral text-sm" x-text="event.date.toLocaleDateString('ru-RU', { day: 'numeric', month: 'long', year: 'numeric', timeZone: 'UTC' })"></span>
                </div>
              </div>
              <div class="mt-auto">
                <a
                  href="#"
                  class="btn bg-base-300 text-base-content rounded-lg"
                  x-text="'Подробнее'"></a>
              </div>
            </div>
          </div>
        </template>
      </div>
    </div>

    <!-- Other events -->
    <div class="space-y-8">
      <h3 class="text-xl font-serif">Еще в этот день</h3>
      <div class="flex gap-10 overflow-x-auto pb-4">
        <template x-for="(event, index) in smallEvents" :key="index">
          <!-- Inlined SmallEventCard -->
          <div
            class="bg-white rounded-2xl shadow-lg overflow-hidden w-[249px] flex-shrink-0"
          >
            <img
              x-bind:src="event.image"
              alt="Event Image"
              class="w-full h-[165px] object-cover"
            />
            <div class="p-2">
              <span
                class="text-xs uppercase tracking-widest font-medium text-error"
                x-text="event.tag"></span>
              <h3
                class="font-serif text-base mt-1 leading-tight"
                x-text="event.title"
              >
              </h3>
              <div class="flex items-center mt-2 text-xs text-neutral">
                <span set:html={locationIcon} />
                <span class="ml-2" x-text="event.location"></span>
              </div>
            </div>
          </div>
        </template>
      </div>
    </div>
  </div>
</div>
